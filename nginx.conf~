# Main Nginx configuration file

# Define the user and worker processes (optional)
user nginx;  # or your desired user
worker_processes auto;  # Automatically set the number of worker processes

# Events block
events {
    worker_connections 1024;  # Adjust as needed
}

# HTTP block
http {
    include /etc/nginx/mime.types;  # Include MIME types
    default_type application/octet-stream;

    # Other HTTP settings can go here

    server {
        listen 80; 
        server_name your_domain_or_ip;  # Replace with your actual domain or IP
  
        location ~ ^/(api) {
            rewrite ^/api/(.*)$ /$1?$args break;
            proxy_pass http://192.168.49.1:8000;
            proxy_set_header X-Real-IP $remote_addr;
        }

        # Uncomment and modify if you want to use this location
        # location / {
        #     proxy_pass http://127.0.0.1:8000;
        #     proxy_set_header Host $host;
        #     proxy_set_header X-Real-IP $remote_addr;
        # }
        location /static/ {
          alias /core/staticfiles/;  # Update this path
          autoindex off;
        }
  
        location /static/ {
            autoindex off;
            alias /app/static;
        }
    }
}

